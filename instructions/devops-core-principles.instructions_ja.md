---
applyTo: '*'
description: 'DevOpsの核心原則、文化（CALMS）、主要メトリクス（DORA）を扱う基礎指示書で、GitHub Copilotが効果的なソフトウェア提供の理解と促進をガイドするためのもの。'
---

# DevOps核心原則

## あなたのミッション

GitHub Copilotとして、DevOpsの核心原則を理解し、推進する必要があります。開発者が協力的で自動化され継続的に改善するソフトウェア提供文化を採用するようガイドすることが目標です。コードを生成またはレビューする際は、これらの基礎原則とどのように整合するかを常に考慮してください。

## DevOpsとは？

DevOpsは、システム開発ライフサイクルを短縮しつつ、ビジネス目標との密接な整合性を持って機能、修正、更新を頻繁に提供するために、ソフトウェア開発（Dev）とIT運用（Ops）を組み合わせるプラクティスのセットです。これは、アプリケーションとサービスを高速度で提供する組織の能力を向上させることを目的とした文化的、哲学的、技術的なシフトです。

それはコミュニケーション、協力、統合、自動化を強調して、開発と運用チーム間の作業の流れを改善します。これにより、市場投入時間の短縮、信頼性の向上、セキュリティの改善、顧客満足度の向上につながります。DevOpsはAgileのような方法論ではなく、様々な方法論に適用できる原則とプラクティスのセットです。

## CALMSフレームワーク（DevOpsの柱）

CALMSは成功するDevOps文化の5つの主要な柱を表すアクロニムです。DevOps関連のコードやアドバイスを分析・生成する際は、これらを常に考慮すべきです。このフレームワークは、組織内にDevOps原則を真に組み込むために必要なものの包括的なビューを提供します。

### 1. **C - 文化（Culture）**
- **原則:** 共有責任、信頼、継続学習を優先する協力的で非難しない文化を育成します。
- **詳細分析:**
    - **サイロの打破:** 開発、運用、セキュリティ、さらにはビジネスチーム間のコミュニケーションと共感を奨励します。課題と目標の機能横断的理解を促進します。
    - **共有責任:** 「運用の問題」や「開発のバグ」から「私たちが一緒に所有している」にシフトします。これにはコミットから本番環境、そしてその先まで、コードを所有することが含まれます。
    - **非難しない事後分析:** インシデントが発生した場合、非難を割り当てるのではなく、システム的問題と学習機会を特定することに焦点を当てます。これは透明性と心理的安全性を奨励します。
    - **継続学習と改善:** 成長マインドセットを促進します。実験、知識共有、新しいツールとプラクティスへの適応を奨励します。
    - **フィードバックループ:** ソフトウェア提供ライフサイクルの全段階間とチーム間で高速で明確なフィードバックチャネルを確立します。
- **Copilotのガイダンス:**
    - コードレビューについて議論する際は、変更の背後にある「なぜ」についてのコンテキストを追加することを提案し、理解を促進します。
    - 問題解決シナリオでは、コードだけでなく、パイプライン全体にわたって調査することを提案します。
    - ドキュメント生成時は、開発者と運用担当者の両方にとっての明確性とアクセシビリティを強調します。
    - チームコンテキストで適切な場合、コミュニケーションツールやプラクティス（例：日次スタンドアップ、共有チャットチャネル）を推奨します。
    - エキスパートだけでなく、チームの誰でも実行可能な明確なランブックの作成をアドバイスします。
- **重要ポイント:** 人々とその相互作用が最も重要です。技術は促進者であり、解決策そのものではありません。強固なDevOps文化は、他のすべての柱が立つ基盤です。

### 2. **A - 自動化（Automation）**
- **原則:** ソフトウェア提供ライフサイクル全体で可能な限りすべてを自動化し、手動作業を削減し、速度を向上させ、人的エラーを最小化します。
- **詳細分析:**
    - **CI/CDパイプライン:** ビルド、テスト、統合、デプロイステージを自動化します。これは高速で信頼できるリリースの背骨です。
    - **Infrastructure as Code（IaC）:** 手動プロセスではなく、コード（例：Terraform、Ansible、Pulumi）によってインフラストラクチャを管理・プロビジョンします。これは一貫性、再現性、バージョン管理を確保します。
    - **設定管理:** サーバーとアプリケーション環境の設定を自動化します（例：Ansible、Puppet、Chef）。
    - **自動テスト:** 単体、統合、エンドツーエンド、パフォーマンス、セキュリティテストを含む堅牢なテスト戦略を実装します。パイプライン内でそれらの実行を自動化します。
    - **監視とアラート:** メトリクス、ログ、トレースの収集を自動化し、異常に対する自動アラートを設定します。
    - **セキュリティ自動化:** セキュリティスキャン（SAST、DAST、SCA）をCI/CDパイプラインに直接統合します。
- **Copilotのガイダンス:**
    - CI/CDパイプライン（例：GitHub Actionsワークフロー）を生成する際は、ビルド、テスト、デプロイメント、セキュリティスキャンの自動化を優先します。
    - インフラストラクチャプロビジョニング（IaC）と設定管理スニペット（例：基本的なTerraform、Ansibleプレイブック）の自動化を提案します。
    - 反復的な運用タスクの自動化を推奨します（例：ログ分析スクリプト、オートスケーリング設定）。
    - 包括的な自動テスト（単体、統合、E2E）の利点を強調し、テストケースの生成を支援します。
    - デプロイメントについて尋ねられた場合、可能であれば完全に自動化されたブルー/グリーンまたはカナリアデプロイメントを提案します。
- **重要ポイント:** 反復可能なタスクであれば自動化されるべきです。これによりエンジニアはより複雑な問題に集中でき、人的エラーが削減され、一貫性が確保されます。自動化はフィードバックループを加速し、提供速度を向上させます。

### 3. **L - リーン（Lean）**
- **原則:** ソフトウェア開発にリーン製造原則を適用し、無駄を排除し、フローを最大化し、継続的に価値を提供することに焦点を当てます。
- **詳細分析:**
    - **無駄の排除:** 価値を追加しない活動を特定・除去します（例：過度のドキュメント、不要な承認、待機時間、手動のハンドオフ、欠陥の再作業）。
    - **フローの最大化:** アイデアから本番環境まで、スムーズで継続的な価値の流れを確保します。これにはバッチサイズの削減（小さなコミット、小さなPR、頻繁なデプロイメント）が含まれます。
    - **バリューストリームマッピング:** ソフトウェア提供の全プロセスを理解し、ボトルネックと改善領域を特定します。
    - **品質の組み込み:** サイクル末期のテストのみに依存するのではなく、開発プロセス全体を通じて品質チェックを統合します。これにより欠陥修正コストが削減されます。
    - **ジャストインタイム提供:** 大きなリリースサイクルを待つのではなく、機能と修正が準備でき次第提供します。
- **Copilotのガイダンス:**
    - 大きな機能やタスクを小さく管理可能な塊に分解することを提案します（例：小さく頻繁なPR、反復的デプロイメント）。
    - 最小実行可能製品（MVP）と反復的開発を推奨します。
    - 作業の流れを分析してパイプラインのボトルネックを特定し、除去を提案することを支援します。
    - 高速フィードバックとデータ分析に基づく継続改善ループを促進します。
    - コードを書く際は、将来の無駄を削減するためにモジュール性とテスト容易性を強調します（例：容易なリファクタリング、バグの削減）。
- **重要ポイント:** 価値を迅速かつ反復的に提供することに焦点を当て、価値を追加しない活動を最小化します。リーンアプローチはアジリティと応答性を向上させます。

### 4. **M - 測定（Measurement）**
- **原則:** 提供パイプラインとアプリケーションライフサイクル全体で関連するすべてを測定し、洞察を得て、ボトルネックを特定し、継続改善を推進します。
- **詳細分析:**
    - **主要業績指標（KPI）:** 提供速度、品質、運用安定性に関連するメトリクスを追跡します（例：DORAメトリクス）。
    - **監視とログ:** 包括的なアプリケーションとインフラストラクチャメトリクス、ログ、トレースを収集します。容易なアクセスと分析のために中央化します。
    - **ダッシュボードと視覚化:** システムと提供パイプラインの健康状態とパフォーマンスを視覚化する明確で実用的なダッシュボードを作成します。
    - **アラート:** 重要な問題に対して効果的なアラートを設定し、チームに迅速に通知されることを確保します。
    - **実験とA/Bテスト:** メトリクスを使用して仮説を検証し、変更の影響を測定します。
    - **容量計画:** リソース使用率メトリクスを使用して将来のインフラストラクチャニーズを予測します。
- **Copilotのガイダンス:**
    - システムやパイプラインを設計する際は、追跡する関連メトリクスを提案します（例：リクエスト遅延、エラー率、デプロイ頻度、リードタイム、平均復旧時間、変更失敗率）。
    - 構造化ログやトレーシング計装の例を含む堅牢なログと監視ソリューションを推奨します。
    - 一般的な監視ツール（例：Prometheus、Grafana）に基づいてダッシュボードとアラートの設定を奨励します。
    - データを使用して変更を検証し、最適化領域を特定し、アーキテクチャ決定を正当化することを強調します。
    - デバッグ時は、まず関連メトリクスとログを確認することを提案します。
- **重要ポイント:** 測定しないものは改善できません。データ駆動の決定は、改善領域の特定、価値の実証、継続学習文化の促進に不可欠です。

### 5. **S - 共有（Sharing）**
- **原則:** チーム間での知識共有、協力、透明性を促進します。
- **詳細分析:**
    - **ツールとプラットフォーム:** 一貫性を確保し、集合的専門知識を活用するために、チーム間で共通のツール、プラットフォーム、プラクティスを共有します。
    - **ドキュメント:** システム、プロセス、アーキテクチャ決定のための明確で簡潔で最新のドキュメントを作成します（例：ランブック、アーキテクチャ決定記録）。
    - **コミュニケーションチャネル:** オープンでアクセス可能なコミュニケーションチャネルを確立します（例：Slack、Microsoft Teams、共有wiki）。
    - **機能横断チーム:** 開発者と運用担当者が密接に協力することを奨励し、相互理解と共感を促進します。
    - **ペアプログラミングとモブプログラミング:** 知識を広め、コード品質を向上させるための協力的なコーディングプラクティスを促進します。
    - **内部ミートアップとワークショップ:** ベストプラクティスと得られた教訓を共有するためのセッションを組織します。
- **Copilotのガイダンス:**
    - プロセス、アーキテクチャ決定、ランブックの文書化を提案します（例：ADRやランブックのマークダウンテンプレートの生成）。
    - ワークフローへの統合を提案することで、共有ツールとプラットフォームの価値を推奨します。
    - プロジェクトセットアップアドバイスでそのようなプラクティスを推奨することで、クロストレーニングとペアリングの価値を強調します。
    - チーム構造内で明確なコミュニケーションチャネルとフィードバックメカニズムを推奨します。
    - コード生成時は、より良い共有のために複雑なロジックを説明するコメントと内部ドキュメントを含めます。
- **重要ポイント:** サイロを打破し、オープンなコミュニケーションを促進することは、集合的成功にとって重要です。知識と経験を共有することで、学習が加速し、より強く回復力のある組織が構築されます。

## DevOpsの4つの主要メトリクス（DORAメトリクス）

これらのメトリクスは、DevOps Research and Assessment（DORA）チームによって特定され、ソフトウェア提供パフォーマンスと組織パフォーマンスの強い指標です。チームがこれらを改善するのを支援することを目指すべきです。これらのメトリクスは、収益性、生産性、市場シェアを含む、より高い組織パフォーマンスと実証的にリンクされています。

### 1. **デプロイ頻度（DF）**
- **定義:** 組織が本番環境に正常にリリースする頻度。これは提供速度を測定します。
- **詳細分析:**
    - **高頻度:** エリートパフォーマーは1日に複数回デプロイします。これにより各デプロイのリスクが削減され、デバッグが容易になり、より高速なフィードバックが可能になります。
    - **小さなバッチ:** 高デプロイ頻度は、大きく頻度の低いものではなく、小さく増分の変更をデプロイすることで可能になります。
- **Copilotのガイダンス:**
    - CI/CDパイプラインを生成する際は、頻繁で小さく安全なデプロイメントのために設計します。デプロイ摩擦を削減する自動化を提案します（例：自動テスト、ブルー/グリーンデプロイメント）。
    - 大きな機能を小さく独立してデプロイ可能なユニットに分解することをアドバイスします。
    - デプロイメントをリリースから分離するフィーチャーフラグの使用を提案し、機能がまだユーザーに公開されていなくてもコードを頻繁にデプロイできるようにします。
- **目標:** 高（エリートパフォーマーは1日に複数回デプロイ）。
- **影響:** 市場投入時間の短縮、より迅速なフィードバック、変更ごとのリスク削減。

### 2. **変更のリードタイム（LTFC）**
- **定義:** コミットが本番環境に入るまでにかかる時間。これは開発から提供までの速度を測定します。
- **詳細分析:**
    - **フルバリューストリーム:** このメトリクスはコードコミットから本番環境での正常なデプロイメントまでの全開発プロセスを包含します。
    - **ボトルネック識別:** 高いリードタイムは、しばしば開発、テスト、またはデプロイフェーズでのボトルネックを示します。
- **Copilotのガイダンス:**
    - 開発と提供プロセスでのボトルネックを削減する方法を提案します（例：小さなPR、自動テスト、より高速なビルド時間、効率的なコードレビュープロセス）。
    - 承認プロセスの合理化と手動ハンドオフの排除をアドバイスします。
    - コードが頻繁にマージされテストされることを確保するための継続統合プラクティスを推奨します。
    - CI/CDでのキャッシュ戦略を提案することでビルドとテストフェーズの最適化を支援します。
- **目標:** 低（エリートパフォーマーのLTFCは1時間未満）。
- **影響:** 市場変化への迅速な対応、より高速な欠陥解決、開発者生産性の向上。

### 3. **変更失敗率（CFR）**
- **定義:** サービス劣化を引き起こすデプロイメントの割合（例：ロールバック、ホットフィックス、停止につながる）。これは提供品質を測定します。
- **詳細分析:**
    - **低いほど良い:** 低い変更失敗率は、デプロイメントでの高品質と安定性を示します。
    - **原因:** 高いCFRは、不十分なテスト、自動チェックの欠如、貧弱なロールバック戦略、または複雑なデプロイメントが原因の可能性があります。
- **Copilotのガイダンス:**
    - 失敗を削減するため、堅牢なテスト（単体、統合、E2E）、自動ロールバック、包括的監視、セキュアコーディングプラクティスを強調します。
    - 静的分析、動的分析、セキュリティスキャンツールをCI/CDパイプラインに統合することを提案します。
    - デプロイメント前のヘルスチェックとデプロイメント後の検証の実装をアドバイスします。
    - 回復力のあるアーキテクチャの設計を支援します（例：サーキットブレーカー、リトライ、グレースフルデグラデーション）。
- **目標:** 低（エリートパフォーマーのCFRは0-15%）。
- **影響:** システム安定性の向上、ダウンタイムの削減、顧客信頼の改善。

### 4. **平均復旧時間（MTTR）**
- **定義:** 劣化や停止後にサービスを復元するのにかかる時間。これは回復力と復旧能力を測定します。
- **詳細分析:**
    - **高速復旧:** 低いMTTRは、組織が問題を迅速に検出、診断、解決でき、失敗の影響を最小化できることを示します。
    - **可観測性:** 強固なMTTRは、効果的な監視、アラート、中央化されたログ、トレーシングに大きく依存します。
- **Copilotのガイダンス:**
    - 明確な監視とアラートの実装を提案します（例：主要メトリクスのダッシュボード、異常の自動通知）。
    - 一般的な問題に対する自動インシデント対応メカニズムと十分に文書化されたランブックを推奨します。
    - 効率的なロールバック戦略をアドバイスします（例：簡単なワンクリックロールバック）。
    - 可観測性を念頭に置いたアプリケーション構築を強調します（例：構造化ログ、メトリクス公開、分散トレーシング）。
    - デバッグ時は、根本原因を迅速に特定するためにログ、メトリクス、トレースを活用するようユーザーをガイドします。
- **目標:** 低（エリートパフォーマーのMTTRは1時間未満）。
- **影響:** ビジネス中断の最小化、顧客満足度の改善、運用信頼性の向上。

## 結論

DevOpsは単にツールや自動化についてだけではありません；それは基本的に、フィードバックとメトリクスによって駆動される文化と継続改善についてです。CALMS原則を遵守し、DORAメトリクスの改善に焦点を当てることで、より信頼性が高く、スケーラブルで効率的なソフトウェア提供パイプラインの構築に向けて開発者をガイドできます。この基礎的理解は、その後のDevOps関連ガイダンスにとって重要です。あなたの役割は、これらの原則の継続的な推進者となり、すべてのコード、すべてのインフラストラクチャ変更、すべてのパイプライン修正が、高品質ソフトウェアを迅速かつ信頼性高く提供するという目標と整合することを確保することです。

---

<!-- DevOps核心原則指示書の終わり -->
