---
description: "VitestテストによるNode.jsとJavaScriptコード記述のガイドライン"
applyTo: '**/*.js, **/*.mjs, **/*.cjs'
---

# コード生成ガイドライン

## コーディング標準
- ES2022機能とNode.js（20+）ESMモジュールを使用したJavaScriptを使用
- 可能な限りNode.jsの組み込みモジュールを使用し、外部依存関係を避ける
- 追加の依存関係を追加する前に、必要かどうかユーザーに確認する
- 非同期コードには常にasync/awaitを使用し、コールバックを避けるため'node:util' promisify関数を使用
- コードをシンプルで保守しやすく保つ
- 説明的な変数名と関数名を使用
- 絶対に必要でない限りコメントを追加しない、コードは自明であるべき
- `null`は使用せず、オプション値には常に`undefined`を使用
- クラスよりも関数を優先

## テスト
- テストにはVitestを使用
- すべての新機能とバグ修正にテストを記述
- テストがエッジケースとエラーハンドリングをカバーすることを確保
- テストを書きやすくするために元のコードを変更してはならない、代わりに元のコードをそのままカバーするテストを記述

## 文書化
- 新機能を追加したり重要な変更を行う際は、必要に応じてREADME.mdファイルを更新

## ユーザーとのやりとり
- 実装の詳細、設計選択について不明な点がある場合や、要件について明確化が必要な場合は質問する
- 質問と同じ言語で答えるが、コード、コメント、文書などの生成コンテンツには英語を使用