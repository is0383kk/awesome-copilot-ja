---
mode: 'agent'
description: '新機能、既存コードのリファクタリング、パッケージアップグレード、設計、アーキテクチャまたはインフラ用の新しい実装計画ファイルを作成します。'
tools: ['changes', 'codebase', 'editFiles', 'extensions', 'fetch', 'githubRepo', 'openSimpleBrowser', 'problems', 'runTasks', 'search', 'searchResults', 'terminalLastCommand', 'terminalSelection', 'testFailure', 'usages', 'vscodeAPI']
---
# 実装計画作成

## 主要指令

あなたのゴールは`${input:PlanPurpose}`の新しい実装計画ファイルを作成することです。あなたの出力は機械読み取り可能で、決定論的で、他のAIシステムや人間による自律的な実行のために構造化されていなければなりません。

## 実行コンテキスト

このプロンプトはAI間の通信と自動処理のために設計されています。すべての指示は文字通り解釈され、人間の解釈や明確化なしに体系的に実行される必要があります。

## 中核要件

- AIエージェントまたは人間によって完全に実行可能な実装計画を生成する
- 曖昧さゼロの決定論的言語を使用する
- 自動解析と実行のためにすべてのコンテンツを構造化する
- 理解に外部依存関係のない完全な自己完結性を確保する

## 計画構造要件

計画は実行可能なタスクを含む離散的で原子的なフェーズで構成されなければなりません。各フェーズは明示的に宣言された場合を除き、フェーズ間の依存関係なしに、AIエージェントまたは人間によって独立して処理可能でなければなりません。

## フェーズアーキテクチャ

- 各フェーズは測定可能な完了基準を持つ必要がある
- フェーズ内のタスクは依存関係が指定されていない限り並列実行可能でなければならない
- すべてのタスク説明には特定のファイルパス、関数名、正確な実装詳細を含める必要がある
- どのタスクも人間の解釈や意思決定を必要としてはならない

## AI最適化実装標準

- 解釈を一切必要としない明示的で曖昧さのない言語を使用する
- すべてのコンテンツを機械解析可能なフォーマット（テーブル、リスト、構造化データ）として構造化する
- 該当する場合は特定のファイルパス、行番号、正確なコード参照を含める
- すべての変数、定数、設定値を明示的に定義する
- 各タスク説明内で完全なコンテキストを提供する
- すべての識別子に標準化されたプレフィックスを使用する（REQ-、TASK-など）
- 自動検証可能な検証基準を含める

## 出力ファイル仕様

- 実装計画ファイルを`/plan/`ディレクトリに保存する
- 命名規則を使用する：`[purpose]-[component]-[version].md`
- 目的プレフィックス：`upgrade|refactor|feature|data|infrastructure|process|architecture|design`
- 例：`upgrade-system-command-4.md`、`feature-auth-module-1.md`
- ファイルは適切なフロントマター構造を持つ有効なMarkdownでなければならない

## 必須テンプレート構造

すべての実装計画は以下のテンプレートに厳密に準拠する必要があります。各セクションは必須であり、特定の実行可能なコンテンツで埋められなければなりません。AIエージェントは実行前にテンプレートの準拠を検証する必要があります。

## テンプレート検証ルール

- すべてのフロントマターフィールドが存在し、適切にフォーマットされている必要がある
- すべてのセクションヘッダーは正確に一致する必要がある（大文字小文字を区別）
- すべての識別子プレフィックスは指定されたフォーマットに従う必要がある
- テーブルはすべての必須列を含む必要がある
- 最終出力にプレースホルダーテキストは残してはならない

## ステータス

実装計画のステータスはフロントマターで明確に定義され、計画の現在の状態を反映する必要があります。ステータスは以下のいずれかです（カッコ内はstatus_color）：`Completed`（明るい緑のバッジ）、`In progress`（黄色のバッジ）、`Planned`（青のバッジ）、`Deprecated`（赤のバッジ）、または`On Hold`（オレンジのバッジ）。また、導入セクションでバッジとして表示される必要があります。

```md
---
goal: [パッケージ実装計画のゴールを説明する簡潔なタイトル]
version: [オプション：例：1.0、日付]
date_created: [YYYY-MM-DD]
last_updated: [オプション：YYYY-MM-DD]
owner: [オプション：この仕様に責任を持つチーム/個人]
status: 'Completed'|'In progress'|'Planned'|'Deprecated'|'On Hold'
tags: [オプション：関連するタグまたはカテゴリのリスト、例：`feature`、`upgrade`、`chore`、`architecture`、`migration`、`bug`など]
---

# 導入

![Status: <status>](https://img.shields.io/badge/status-<status>-<status_color>)

[計画と達成を意図するゴールについての短い簡潔な導入。]

## 1. 要件と制約

[計画に影響し、実装方法を制約するすべての要件と制約を明示的にリストする。明確さのために箇条書きまたはテーブルを使用する。]

- **REQ-001**: 要件1
- **SEC-001**: セキュリティ要件1
- **[3文字]-001**: その他の要件1
- **CON-001**: 制約1
- **GUD-001**: ガイドライン1
- **PAT-001**: 従うべきパターン1

## 2. 実装ステップ

### 実装フェーズ1

- GOAL-001: [このフェーズのゴールを説明する、例：「機能Xを実装する」、「モジュールYをリファクタリングする」など。]

| タスク | 説明 | 完了 | 日付 |
|------|-------------|-----------|------|
| TASK-001 | タスク1の説明 | ✅ | 2025-04-25 |
| TASK-002 | タスク2の説明 | |  |
| TASK-003 | タスク3の説明 | |  |

### 実装フェーズ2

- GOAL-002: [このフェーズのゴールを説明する、例：「機能Xを実装する」、「モジュールYをリファクタリングする」など。]

| タスク | 説明 | 完了 | 日付 |
|------|-------------|-----------|------|
| TASK-004 | タスク4の説明 | |  |
| TASK-005 | タスク5の説明 | |  |
| TASK-006 | タスク6の説明 | |  |

## 3. 代替案

[検討されたが選択されなかった代替アプローチの箇条書きリスト、およびなぜそれらが選ばれなかったかの理由。これは選択されたアプローチのコンテキストと根拠を提供するのに役立つ。]

- **ALT-001**: 代替アプローチ1
- **ALT-002**: 代替アプローチ2

## 4. 依存関係

[計画が依存するライブラリ、フレームワーク、またはその他のコンポーネントなど、対処する必要がある依存関係をリストする。]

- **DEP-001**: 依存関係1
- **DEP-002**: 依存関係2

## 5. ファイル

[機能またはリファクタリングタスクによって影響を受けるファイルをリストする。]

- **FILE-001**: ファイル1の説明
- **FILE-002**: ファイル2の説明

## 6. テスト

[機能またはリファクタリングタスクを検証するために実装する必要があるテストをリストする。]

- **TEST-001**: テスト1の説明
- **TEST-002**: テスト2の説明

## 7. リスクと仮定

[計画の実装に関連するリスクまたは仮定をリストする。]

- **RISK-001**: リスク1
- **ASSUMPTION-001**: 仮定1

## 8. 関連仕様 / 参考資料

[関連する仕様1へのリンク]
[関連する外部ドキュメントへのリンク]
```