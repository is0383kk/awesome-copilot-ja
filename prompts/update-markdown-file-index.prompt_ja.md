---
mode: 'agent'
description: '指定されたフォルダーからのファイルのインデックス/テーブルでmarkdownファイルセクションを更新します。'
tools: ['changes', 'codebase', 'editFiles', 'extensions', 'fetch', 'findTestFiles', 'githubRepo', 'openSimpleBrowser', 'problems', 'runCommands', 'runTasks', 'runTests', 'search', 'searchResults', 'terminalLastCommand', 'terminalSelection', 'testFailure', 'usages', 'vscodeAPI']
---
# Markdownファイルインデックスの更新

markdownファイル `${file}` を、フォルダー `${input:folder}` からのファイルのインデックス/テーブルで更新します。

## プロセス

1. **スキャン**: 対象のmarkdownファイル `${file}` を読んで既存の構造を理解
2. **発見**: 指定されたフォルダー `${input:folder}` 内でパターン `${input:pattern}` にマッチするすべてのファイルをリスト
3. **分析**: 更新する既存のテーブル/インデックスセクションが存在するかを特定、または新しい構造を作成
4. **構造化**: ファイルタイプと既存コンテンツに基づいて適切なテーブル/リスト形式を生成
5. **更新**: 既存のセクションを置き換えるか、ファイルインデックスを含む新しいセクションを追加
6. **検証**: Markdownシンタックスが有効で、フォーマットが一貫していることを確認

## ファイル分析

発見された各ファイルについて、以下を抽出：

- **名前**: コンテキストに基づいて拡張子ありまたはなしのファイル名
- **タイプ**: ファイル拡張子とカテゴリ（例：`.md`、`.js`、`.py`）
- **説明**: 最初の行コメント、ヘッダー、または推測される目的
- **サイズ**: 参考のためのファイルサイズ（オプション）
- **更新日**: 最終更新日（オプション）

## テーブル構造オプション

ファイルタイプと既存コンテンツに基づいて形式を選択：

### オプション1: シンプルリスト

```markdown
## ${folder} 内のファイル

- [filename.ext](path/to/filename.ext) - 説明
- [filename2.ext](path/to/filename2.ext) - 説明
```

### オプション2: 詳細テーブル

| ファイル | タイプ | 説明 |
|------|------|-------------|
| [filename.ext](path/to/filename.ext) | 拡張子 | 説明 |
| [filename2.ext](path/to/filename2.ext) | 拡張子 | 説明 |

### オプション3: カテゴリ別セクション

タイプ/カテゴリ別にファイルをグループ化し、個別のセクションまたはサブテーブルで分ける。

## 更新戦略

- 🔄 **既存を更新**: テーブル/インデックスセクションが存在する場合、構造を保持してコンテンツを置き換え
- ➕ **新規追加**: 既存のセクションがない場合、最適なフィット形式を使用して新しいセクションを作成
- 📋 **保持**: 既存のMarkdownフォーマット、ヘッダーレベル、ドキュメントフローを維持
- 🔗 **リンク**: リポジトリ内のファイルリンクに相対パスを使用

## セクション識別

以下のパターンで既存セクションを探す：

- 「index」「files」「contents」「directory」「list」を含むヘッダー
- ファイル関連列のあるテーブル
- ファイルリンクのあるリスト
- ファイルインデックスセクションをマークするHTMLコメント

## 要件

- 既存のMarkdown構造とフォーマットを保持
- ファイルリンクに相対パスを使用
- 利用可能な場合はファイル説明を含める
- デフォルトでファイルをアルファベット順にソート
- ファイル名の特殊文字を処理
- 生成されたすべてのMarkdownシンタックスを検証